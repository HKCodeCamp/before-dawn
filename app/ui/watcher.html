<!DOCTYPE html>
<html>
  <head>
    <link href="photon.min.css" rel="stylesheet" type="text/css" />
    <script>
     // parse incoming URL params -- we'll get a link to the current screen images for previews here
     window.urlParams = window.location.search.split(/[?&]/).slice(1).map(function(paramPair) {
       return paramPair.split(/=(.+)?/).slice(0, 2);
     }).reduce(function (obj, pairArray) {            
       obj[pairArray[0]] = pairArray[1];
       return obj;
     }, {});
    </script>
  </head>

  <body>
    <div class="window">
      <div id="wrapper"></div>
    </div>
    <script>

     // the main app will pass us a screenshot URL, here it is
     var screenshot = decodeURIComponent(urlParams.screenshot);
     var src = decodeURIComponent(urlParams.src);

     var resizeIframe = function() {
       var iframe = document.querySelector("iframe");
       var main = document.querySelector(".window");
       iframe.width = main.offsetWidth;
       iframe.height = main.offsetHeight;

       // need to add width/height params here too
       iframe.src = src;
     }

     var holder = document.getElementById("wrapper");
     var iframe = document.createElement('iframe');

     holder.appendChild(iframe);

     resizeIframe();
     window.addEventListener('resize', resizeIframe, true);
    
    </script>
  </body>
</html>
